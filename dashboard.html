<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Ready2Study</title>
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <header>
        <div class="container nav-content">
            <a href="index.html" class="logo">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round">
                    <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
                    <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
                </svg>
                Ready<span>2Study</span>
            </a>
            <nav>
                <div id="studentHeaderInfo" style="display: none;">
                    <span id="headerName" style="font-weight: 600; margin-right: 1rem;"></span>
                    <span id="headerDetails" style="font-size: 0.875rem; color: var(--text-muted); margin-right: 1rem;"></span>
                    <a href="#" id="logoutBtn" class="btn btn-secondary">Logout</a>
                </div>
            </nav>
        </div>
    </header>

    <!-- Decorative Books and Pens Images -->
    <div class="dashboard-decorations">
        <!-- Books -->
        <div class="decoration-book book-1">
            <img src="https://images.unsplash.com/photo-1544947950-fa07a98d237f?w=200&h=200&fit=crop&q=80" alt="Book" class="decoration-image">
        </div>
        <div class="decoration-book book-2">
            <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=200&h=200&fit=crop&q=80" alt="Book" class="decoration-image">
        </div>
        <div class="decoration-book book-3">
            <img src="https://images.unsplash.com/photo-1481627834876-b7833e8f5570?w=200&h=200&fit=crop&q=80" alt="Book" class="decoration-image">
        </div>
        <div class="decoration-book book-4">
            <img src="https://images.unsplash.com/photo-1524995997946-a1c2e315a42f?w=200&h=200&fit=crop&q=80" alt="Book" class="decoration-image">
        </div>
        
        <!-- Pens -->
        <div class="decoration-pen pen-1">
            <img src="https://images.unsplash.com/photo-1583484963886-cfe2bff2945f?w=150&h=150&fit=crop&q=80" alt="Pen" class="decoration-image">
        </div>
        <div class="decoration-pen pen-2">
            <img src="https://images.unsplash.com/photo-1561070791-2526d30994b5?w=150&h=150&fit=crop&q=80" alt="Pen" class="decoration-image">
        </div>
        <div class="decoration-pen pen-3">
            <img src="https://images.unsplash.com/photo-1513475382585-d06e58bcb0e0?w=150&h=150&fit=crop&q=80" alt="Pen" class="decoration-image">
        </div>
    </div>

    <main>
        <div class="container">
            <div class="dashboard-layout">
                <aside class="sidebar">
                    <div class="filter-group">
                        <h3>Filter by Marks</h3>
                        <button class="filter-btn active" data-filter="all">All Questions</button>
                        <button class="filter-btn" data-filter="1">1 Mark Questions</button>
                        <button class="filter-btn" data-filter="2">2 Mark Questions</button>
                        <button class="filter-btn" data-filter="3">3 Mark Questions</button>
                        <button class="filter-btn" data-filter="10">10 Mark Questions</button>
                    </div>
                    <div style="margin-top: 2rem; padding-top: 2rem; border-top: 1px solid var(--border);">
                        <button class="filter-btn" id="toggleAllAnswers">Show All Answers</button>
                        <button class="filter-btn" onclick="window.print()">Print / Save PDF</button>
                        <a href="test.html" class="filter-btn" style="text-decoration: none; display: block; text-align: left; background: var(--gradient-primary); color: white; margin-top: 0.5rem;">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 0.5rem; vertical-align: middle;">
                                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                                <polyline points="14 2 14 8 20 8"></polyline>
                                <line x1="16" y1="13" x2="8" y2="13"></line>
                                <line x1="16" y1="17" x2="8" y2="17"></line>
                                <polyline points="10 9 9 9 8 9"></polyline>
                            </svg>
                            Take Practice Test (20 Marks)
                        </a>
                        <a href="saved-questions.html" class="filter-btn" style="text-decoration: none; display: block; text-align: left; margin-top: 0.5rem;">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 0.5rem; vertical-align: middle;">
                                <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path>
                            </svg>
                            Saved Important Questions
                        </a>
                    </div>
                </aside>

                <section class="content-area">
                    <div class="questions-grid" id="questionsContainer">
                        <!-- Questions will be injected here by JS -->
                    </div>
                </section>
            </div>
        </div>
    </main>

    <!-- Image Modal for Full-Screen View -->
    <div id="imageModal" class="image-modal" onclick="closeImageModal()">
        <span class="image-modal-close">&times;</span>
        <img class="image-modal-content" id="modalImage">
        <div class="image-modal-caption" id="modalCaption"></div>
    </div>

    <!-- Subject Selection Modal -->
    <div id="subjectModal" class="subject-modal">
        <div class="subject-modal-content" onclick="event.stopPropagation()">
            <span class="subject-modal-close" onclick="closeSubjectModal()">&times;</span>
            <h3>Mark as Important</h3>
            <p style="color: var(--text-muted); margin-bottom: 1.5rem;">Select a subject to organize this question:</p>
            <div class="subject-input-group">
                <label for="subjectSelect" class="form-label">Select or Create Subject:</label>
                <input type="text" id="subjectInput" class="form-input" placeholder="Enter subject name (e.g., Mathematics, Physics)" list="subjectList">
                <datalist id="subjectList"></datalist>
            </div>
            <div style="margin-top: 1.5rem; display: flex; gap: 0.75rem; justify-content: flex-end;">
                <button class="btn btn-secondary" onclick="closeSubjectModal()">Cancel</button>
                <button class="btn btn-primary" id="saveImportantBtn">Save</button>
            </div>
        </div>
    </div>

    <script>
        // Prevent multiple script executions
        if (window.dashboardLoaded) {
            console.warn('Dashboard already loaded, preventing reload');
        } else {
            window.dashboardLoaded = true;
        }

        // Image Modal Functions
        function openImageModal(imgSrc) {
            const modal = document.getElementById('imageModal');
            const modalImg = document.getElementById('modalImage');
            const caption = document.getElementById('modalCaption');
            
            if (modal && modalImg) {
                modal.style.display = 'flex';
                modalImg.src = imgSrc;
                caption.textContent = imgSrc.split('/').pop() || 'Image';
            }
        }

        function closeImageModal() {
            const modal = document.getElementById('imageModal');
            if (modal) {
                modal.style.display = 'none';
            }
        }

        // Close modal on Escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeImageModal();
            }
        });
    </script>
    <script src="js/mockData.js"></script>
    <script src="js/app.js"></script>
</body>

</html>

